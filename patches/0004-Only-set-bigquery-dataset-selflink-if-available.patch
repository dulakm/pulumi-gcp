From 65e1d2290b3541428b1054458668101f7f3cd716 Mon Sep 17 00:00:00 2001
From: Daniel Bradley <daniel@pulumi.com>
Date: Tue, 7 Mar 2023 11:55:24 +0000
Subject: [PATCH 4/9] Only set bigquery dataset selflink if available

---
 .../services/bigquery/resource_bigquery_dataset.go       | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/google-beta/services/bigquery/resource_bigquery_dataset.go b/google-beta/services/bigquery/resource_bigquery_dataset.go
index a6d618bd9..ce7ede29e 100644
--- a/google-beta/services/bigquery/resource_bigquery_dataset.go
+++ b/google-beta/services/bigquery/resource_bigquery_dataset.go
@@ -635,8 +635,13 @@ func resourceBigQueryDatasetRead(d *schema.ResourceData, meta interface{}) error
 	if err := d.Set("default_collation", flattenBigQueryDatasetDefaultCollation(res["defaultCollation"], d, config)); err != nil {
 		return fmt.Errorf("Error reading Dataset: %s", err)
 	}
-	if err := d.Set("self_link", tpgresource.ConvertSelfLinkToV1(res["selfLink"].(string))); err != nil {
-		return fmt.Errorf("Error reading Dataset: %s", err)
+	if res["selfLink"] != nil {
+		if err := d.Set("self_link", tpgresource.ConvertSelfLinkToV1(res["selfLink"].(string))); err != nil {
+			return fmt.Errorf("Error reading Dataset: %s", err)
+		}
+	} else {
+		// we don't have a self_link so we set an empty string
+		d.Set("self_link", "")
 	}
 
 	return nil
-- 
2.39.1

